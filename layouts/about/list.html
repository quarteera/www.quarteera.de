{{ define "main" }}
  <div class="projects-page">
    <div class="page-heading">
      {{- partial "dots.html" (dict "context" . "style" .Params.color) -}}
      <h1 class="{{ .Params.color }}-dots">{{ .Title }}</h1>
    </div>

    <div class="page-content">
      <p>{{ .Content }}</p>
    </div>
    {{ range .Pages.ByWeight }}
      <a href="{{ .Permalink }}"  class="regular-section {{ .Params.color }}-dashed-border">
        {{ if and ( isset .Params "image" ) ( ne ( trim .Params.image " " ) "" )  }}
          {{ $img := .Resources.GetMatch (.Params.image) }}
          {{ with $img }}
            <img class="image" src="{{ ( $img.Fill "352x352 Center" ).RelPermalink }}" atl="{{ .Params.alt }}"/>
          {{ end }}
        {{ end }}
        <div>
          <h4>{{ .Title }}</h4>
          {{ if .Params.summary }}
            <p class="text">{{ .Params.summary | truncate 200 }}</p>
          {{ else }}
            <p class="text">{{ .Summary | truncate 200 }}</p>
          {{ end }}
        </div>
      </a>

      <a href="{{ .Permalink }}"  class="regular-section-mobile {{ .Params.color }}-dashed-border">
        <div>
          {{ if and ( isset .Params "image" ) ( ne ( trim .Params.image " " ) "" )  }}
            {{ $img := .Resources.GetMatch (.Params.image) }}
            {{ with $img }}
              <img class="image" src="{{ ( $img.Fill "80x80 Center" ).RelPermalink }}" atl="{{ .Params.alt }}"/>
            {{ end }}
          {{ end }}
          <h4>{{ .Title }}</h4>
        </div>
        {{ if .Params.summary }}
          <p class="text">{{ .Params.summary | truncate 200 }}</p>
        {{ else }}
          <p class="text">{{ .Summary | truncate 200 }}</p>
        {{ end }}
      </a>
    {{ end }}
  </div>
  {{- partial "tree.html" (dict "context" . "style" .Params.color) -}}
{{ end }}
